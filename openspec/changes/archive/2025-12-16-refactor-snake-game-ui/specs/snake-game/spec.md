# snake-game Specification Delta

## REMOVED Requirements

### Requirement: 复古像素风格视觉设计
**Reason**: 从复古像素风格改为儿童糖果色风格
**Migration**: 使用新的"儿童友好糖果色视觉设计" requirement

---

## MODIFIED Requirements

### Requirement: 贪吃蛇游戏核心玩法
系统 SHALL 提供经典贪吃蛇游戏，支持键盘方向键控制和触摸屏控制。

#### Scenario: 开始游戏
- **WHEN** 用户进入贪吃蛇游戏页面
- **THEN** 显示游戏区域
- **AND** 显示游戏标题"字母贪吃蛇"
- **AND** 显示退出游戏按钮
- **AND** 显示操作说明"使用方向键控制"和"按空格键开始/暂停游戏"
- **AND** 显示分数（初始为0）
- **AND** 蛇初始长度为3-4节，蛇头为可爱图标，蛇身由随机字母组成，位于游戏区域中央
- **AND** 游戏初始状态为暂停，显示暂停提示"按空格键开始游戏"

#### Scenario: 键盘控制蛇移动
- **WHEN** 用户按下方向键（上、下、左、右）
- **THEN** 蛇按照对应方向移动
- **AND** 蛇不能立即反向移动（例如向上移动时不能立即向下）
- **AND** 蛇的移动速度根据长度动态调整，流畅自然

#### Scenario: 移动速度随长度变化
- **WHEN** 蛇的长度小于10格
- **THEN** 移动速度为300ms间隔（最慢）
- **WHEN** 蛇的长度在10-20格之间
- **THEN** 移动速度为200ms间隔（更快）
- **WHEN** 蛇的长度在20-30格之间
- **THEN** 移动速度为160ms间隔（更快）
- **WHEN** 蛇的长度超过30格
- **THEN** 移动速度继续根据长度调整（每10格减少20ms间隔，最快100ms）
- **AND** 蛇越长，移动速度越快

#### Scenario: 空格键开始游戏
- **WHEN** 游戏处于暂停状态
- **AND** 用户按下空格键
- **THEN** 游戏开始运行
- **AND** 隐藏暂停提示
- **AND** 蛇开始移动

#### Scenario: 空格键暂停游戏
- **WHEN** 游戏正在运行
- **AND** 用户按下空格键
- **THEN** 游戏暂停
- **AND** 显示暂停提示"按空格键开始游戏"
- **AND** 蛇停止移动

#### Scenario: 退出游戏
- **WHEN** 用户点击"退出游戏"按钮或按下ESC键
- **THEN** 停止游戏循环
- **AND** 停止游戏时间追踪
- **AND** 返回到游戏列表页面

#### Scenario: 触摸屏控制
- **WHEN** 用户在移动设备上玩游戏
- **THEN** 显示触摸控制按钮（上、下、左、右）
- **AND** 用户可以通过点击按钮控制蛇的移动方向
- **AND** 触摸按钮使用圆润的糖果色设计

#### Scenario: 食物生成（单词模式）
- **WHEN** 游戏开始时或蛇吃到食物后
- **THEN** 从单词库中按顺序取出下一个字母作为食物
- **AND** 当一个单词的字母用完时，显示果子 🍎 作为分隔符
- **AND** 果子被吃掉后继续显示下一个单词的字母
- **AND** 食物不会与蛇身重叠
- **AND** 食物位置在游戏网格内对齐

#### Scenario: 吃到食物
- **WHEN** 蛇的头部移动到食物（字母或果子）位置
- **THEN** 蛇的身体增长一节，新增的身体部分显示被吃的字母或果子
- **AND** 分数增加（例如每吃一个字母+10分）
- **AND** 生成下一个食物（按单词库顺序）
- **AND** 显示彩色庆祝效果
- **AND** 分数显示有更新动画

#### Scenario: 蛇身字母保持
- **WHEN** 蛇移动时
- **THEN** 蛇身每一节保持其原有的字母或果子不变
- **AND** 蛇头始终显示为可爱图标，不显示字母
- **AND** 蛇身按吃到的顺序排列字母，形成如"HELLO🍎WORLD"的效果

#### Scenario: 碰撞检测
- **WHEN** 蛇的头部撞到游戏区域边界
- **THEN** 游戏结束
- **AND** 显示游戏结束弹窗

#### Scenario: 撞到自己
- **WHEN** 蛇的头部撞到自己的身体
- **THEN** 游戏结束
- **AND** 显示游戏结束弹窗

#### Scenario: 游戏结束
- **WHEN** 游戏结束时（撞墙或撞到自己）
- **THEN** 显示全屏半透明遮罩
- **AND** 显示"游戏结束"文字（糖果色渐变风格）
- **AND** 显示最终分数
- **AND** 显示"重新开始"按钮
- **AND** 按钮在鼠标悬停时有缩放效果

#### Scenario: 挑战成功
- **WHEN** 蛇的长度达到50格
- **THEN** 游戏自动暂停
- **AND** 显示挑战成功弹窗
- **AND** 弹窗显示"🎉 挑战成功！"标题
- **AND** 显示最终分数
- **AND** 显示"重新开始"和"返回游戏列表"按钮
- **AND** 用户可以选择重新开始或返回游戏列表

#### Scenario: 重新开始游戏
- **WHEN** 用户点击"重新开始"按钮
- **THEN** 重置游戏状态
- **AND** 蛇回到初始位置和长度
- **AND** 分数重置为0
- **AND** 单词库重置到第一个单词
- **AND** 生成新的食物
- **AND** 游戏重新开始

---

## ADDED Requirements

### Requirement: 儿童友好糖果色视觉设计
系统 SHALL 实现儿童友好的糖果色视觉设计，与应用整体风格一致，包括游戏元素、UI 和背景。

#### Scenario: 游戏背景
- **WHEN** 用户查看游戏画面
- **THEN** 背景使用柔和的糖果色渐变（粉白-蓝白-橙白）
- **AND** 背景上可显示淡淡的圆点或气泡装饰
- **AND** 游戏区域有圆润的边框和柔和阴影

#### Scenario: 蛇身视觉
- **WHEN** 用户查看游戏中的蛇
- **THEN** 蛇头显示为可爱的蛇头图标（如卡通蛇脸）
- **AND** 蛇头根据移动方向自动旋转
- **AND** 蛇身由字母和果子组成，每个节段显示对应内容
- **AND** 蛇身颜色使用糖果色彩虹渐变（粉→橙→黄→绿→蓝→紫）
- **AND** 每个字母使用 Fredoka 或类似的圆润字体显示
- **AND** 字母有柔和的阴影效果，清晰可见
- **AND** 蛇身节段为圆润的形状

#### Scenario: 食物视觉
- **WHEN** 用户查看游戏中的食物
- **THEN** 字母食物显示在圆润的彩色背景上
- **AND** 字母使用圆润字体，字体大小适中，清晰可见
- **AND** 果子食物显示为 🍎 emoji 或类似的可爱图标
- **AND** 食物有轻微的弹跳或发光动画

#### Scenario: 分数显示
- **WHEN** 用户查看分数
- **THEN** 分数显示在游戏区域上方
- **AND** 使用卡片样式，圆润边角，柔和阴影
- **AND** 使用 Baloo 2 或 Fredoka 字体
- **AND** 得分更新时显示庆祝动画效果

#### Scenario: 游戏区域边框
- **WHEN** 用户查看游戏区域
- **THEN** 游戏区域有圆润的糖果色边框
- **AND** 边框有柔和的阴影效果

#### Scenario: 游戏标题
- **WHEN** 用户查看游戏页面
- **THEN** 游戏顶部显示"字母贪吃蛇"或类似标题
- **AND** 使用 Baloo 2 字体，糖果色渐变
- **AND** 标题可有轻微的动画效果

#### Scenario: 操作说明
- **WHEN** 用户查看游戏页面
- **THEN** 游戏底部显示操作说明
- **AND** 字体使用 Quicksand
- **AND** 颜色柔和，不抢眼

---

## MODIFIED Requirements

### Requirement: 响应式设计
系统 SHALL 确保游戏在各种屏幕尺寸上都能良好运行，特别是在手机上。

#### Scenario: 桌面端显示
- **WHEN** 用户在桌面设备上玩游戏
- **THEN** 游戏区域居中显示
- **AND** 画布大小适配屏幕（最大约 600x600px）
- **AND** 页面无滚动条
- **AND** 所有UI元素完整显示

#### Scenario: 移动端显示
- **WHEN** 用户在移动设备上玩游戏
- **THEN** 游戏区域自动适配屏幕宽度
- **AND** 画布大小根据屏幕动态计算
- **AND** 显示大型触摸控制按钮
- **AND** 触摸按钮位置方便单手操作
- **AND** 页面无滚动条

#### Scenario: 画布自适应
- **WHEN** 用户调整浏览器窗口大小
- **THEN** 游戏画布大小相应调整
- **AND** 网格大小按比例缩放
- **AND** 游戏元素保持可读性

---

## ADDED Requirements

### Requirement: 单词库功能
系统 SHALL 实现单词库模式，帮助儿童在游戏中学习英语单词。

#### Scenario: 单词序列显示
- **WHEN** 游戏进行中
- **THEN** 食物按单词库中的单词顺序依次出现字母
- **AND** 每个单词的字母用完后，出现果子 🍎 作为单词分隔符
- **AND** 单词库循环使用

#### Scenario: 蛇身单词展示
- **WHEN** 蛇吃了多个字母和果子后
- **THEN** 蛇身显示为类似 `[🐍]HELLO🍎WORLD🍎...` 的效果
- **AND** 用户可以看到自己"收集"的单词

#### Scenario: 单词库配置
- **WHEN** 游戏加载时
- **THEN** 从 `src/assets/wordList.json` 动态加载单词库
- **AND** 单词库包含 100 个简单常用的英语单词
- **AND** 支持后续更新和扩展
- **AND** 单词库用完后循环使用

---

## MODIFIED Requirements

### Requirement: 字母主题功能
系统 SHALL 实现字母主题，食物和蛇身都由字母组成。

#### Scenario: 字母生成（单词模式）
- **WHEN** 游戏需要生成新的食物时
- **THEN** 从当前单词中取下一个字母
- **AND** 如果单词已完成，生成果子分隔符
- **AND** 然后从下一个单词开始

#### Scenario: 蛇身字母显示
- **WHEN** 用户查看游戏中的蛇
- **THEN** 蛇的头部显示为可爱的蛇头图标
- **AND** 蛇身的每一节都显示对应的字母或果子
- **AND** 字母使用圆润友好的字体
- **AND** 字母颜色与所在节段的背景协调

#### Scenario: 吃到字母后蛇身增长
- **WHEN** 蛇吃到字母或果子后
- **THEN** 被吃的内容添加到蛇身
- **AND** 蛇身上的所有字母和果子保持不变
- **AND** 蛇身长度增加一节

#### Scenario: 初始蛇身字母
- **WHEN** 游戏开始时
- **THEN** 蛇的初始身体由3-4个随机字母组成
- **AND** 蛇头显示为图标
- **AND** 字母按顺序显示在蛇身上

---

## MODIFIED Requirements

### Requirement: 游戏性能优化
系统 SHALL 确保游戏运行流畅，无明显卡顿。

#### Scenario: 流畅渲染
- **WHEN** 游戏运行时
- **THEN** 游戏画面以至少30fps的速度渲染
- **AND** 蛇的移动流畅无卡顿
- **AND** 动画效果流畅自然

#### Scenario: 浏览器兼容性
- **WHEN** 用户在现代浏览器中打开游戏
- **THEN** 游戏正常运行
- **AND** 支持 Chrome、Firefox、Safari、Edge 等主流浏览器
- **AND** 使用 HTML5 和 JavaScript 标准 API
